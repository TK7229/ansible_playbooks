-
  name: Ontap REST API
  hosts: localhost
  gather_facts: False
  collections:
    - netapp.ontap
  vars:
    login: &login
      #hostname: 192.168.20.140
      hostname: 192.168.77.140
      username: admin
      password: Netapp1!
      #hostname: "{{ admin_ip }}"
      #username: "{{ admin_username }}"
      #password: "{{ admin_password }}"
      https: true
      validate_certs: false
    svm_login: &svm_login
      hostname: "{{ svm_admin_ip }}"
      username: "{{ svm_admin_username }}"
      password: "{{ svm_admin_password }}"
      https: true
      validate_certs: false

  tasks:   
   - name: run ontap REST API command as cluster admin - create volume
     tags: create
     na_ontap_restit:
        <<: *login
        api: storage/volumes
        method: GET
        wait_for_completion: true
   - assert: {that: result.response.job_response=='success', quiet: true}
   
   
    - name: run ontap REST API command as cluster admin - create volume
     tags: create
     na_ontap_restit:
        <<: *login
        api: storage/volumes
        body:
          uuid: dfab43d4-cd3e-11ed-b0fb-000c29cc4665
        method: DELETE
        wait_for_completion: true
        #register: result
   - assert: {that: result.response.job_response=='success', quiet: true}
